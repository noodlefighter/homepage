date: 2024-05-19
tags: 

- 笔记
- 计算机网络

---

家中NAS使用固态硬盘后，千兆网络就显得不够用了，经过一些前期调研，决定升级10G光纤网络。

目标是尽可能地减少开销/替换原来预埋的网线/仅使用冷接工艺，第一次自己部署光通讯的网络，知识不一定准确，简单记录仅供参考，欢迎在评论里指正。

<!-- more -->



## 关于光纤网络的一些前置知识



**光纤类型**

光纤分为单模光纤、多模光纤，不能混用。



**光纤接头**

- SC，常用在入户光纤接光猫：![SC接头](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240503181638529.png)
- LC，路由器交换机的光模块上最常见：![LC接头](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240503181607540.png)
- 更多请参考[百度百科](https://baike.baidu.com/item/%E5%85%89%E7%BA%A4%E6%8E%A5%E5%A4%B4)、[维基百科](https://en.wikipedia.org/wiki/Optical_fiber_connector)



**光模块**



![image-20240503182100365](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240503182100365.png)

- 用于光电转换，最常见的封装是SFP+，最常见的接头是LC
- 由光纤的类型、光模块收发是否用同一根纤，分为几种类型
  - 单模单纤：最贵，但只用一根光纤
  - 单模双纤：便宜，量大
  - 多模双纤：最便宜，量最大，发热较低，条件允许的话是首选
- 更多概念和封装类型可以参考华为的这篇《[什么是光模块以及光模块的常见问题](https://support.huawei.com/enterprise/zh/doc/EDOC1100130745)》



**光缆的形态**

**皮线**——生活中最常见

![image-20240503185743834](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240503185743834.png)

**跳线、尾纤**——跳线就是做好头的成品线，常用作设备间连接线；尾纤就是只做了一端成品头的线：

![image-20240503190021935](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240503190021935.png)

![image-20240503190209239](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240503190209239.png)

**集束光缆**——多芯，形态很多，有室内也有户外用的，一般都能抗大拉力

![image-20240503190647062](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240503190647062.png)





**总结一下**

|               | 单模                   | 多模                      |
| ------------- | ---------------------- | ------------------------- |
| 光源          | 激光器                 | LED                       |
| 距离          | 至少数公里             | 一般几百米                |
| 光纤标准      | G.652-G.657            | OM1-OM5                   |
| 包皮颜色      | 一般是黄色             | 橘、水蓝、紫、蓝、鲜绿... |
| 能否冷接      | 能                     | 不能                      |
| 10G单纤光模块 | 贵，80-                | -                         |
| 10G双纤光模块 | 便宜，海鲜市场15元一只 | 便宜，海鲜市场10元一只    |





### 冷接工艺

冷接工艺自己弄还是比较折腾的，要备齐百来块钱的工具，还要做好做坏、工作不稳定的心理准备，比较稳妥避免折腾的方案还是请师傅来熔接。

冷接子，用于把两根纤接在一起，实际操作还是比较考验技巧：

![image-20240503231437725](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240503231437725.png)

冷接头，SC头很便宜，两三块钱，下图这种LC头的就贵，某宝8元一个，接的成功率比较高，很友好：

![image-20240503231244281](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240503231244281.png)

米勒钳，最大的孔用来剥外层的皮，中间的孔用来剥中层的皮，最小的孔用来刮除裸纤上的涂覆层：

![image-20240519213450199](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519213450199.png)

光纤切割器，能切出好的端面减少损耗，自带配的定长工具是用于熔接的（图左），冷接要用专门的定长器（图右）：

![image-20240519213417384](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519213417384.png)

红光笔，能发出红色激光，方便观察光纤状态（光纤受伤了的位置会“红肿”）、损耗（接上光功率计测量），记得购买转接头，图里是FC公转LC母。

光功率计，用于验证光纤的传输效果，记得购买转接头，图里是SC公转LC母。

![image-20240519213625223](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519213625223.png)





## 改造方案设计

家中原先的网络拓扑如图

![image-20240503235032384](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240503235032384.png)

原本仅是打算在NAS上安装双光口网卡，走两根光纤，和书房的两台电脑直连，后面发现10G的光交换机价格已经低到几百块也能买到了，最终方案定为：

![image-20240504000011487](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240504000011487.png)

- 客厅的2.5G交换机作为光转电设备，同时替换原先的千兆交换机，将电口设备简单升级到2.5G
- 10G光口交换机到2.5G交换机间，选用多模双纤光模块+成品跳线
- 房间间互通的光纤需要穿管，而我需要自己冷接只能用单模，而单模单纤光模块太贵，所以选择了单模双纤方案
- 2.5G交换机（2光+4电）是个便宜好用的光电互转设备，后续需要

关键线材和设备是：

- JT-COM 全万兆8光口网管型交换机（JT-FG6700-8TFM），海鲜市场500收的全新
  - ![image-20240504000508304](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240504000508304.png)
- 洪亚威视2.5G电口x4+10G光口x2 交换机（HYWS-SGT0204S），140元
  - ![image-20240504000532757](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240504000532757.png)
- 4芯光缆，20米的60多元，12米的40元
  - ![image-20240504000608915](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240504000608915.png)
- 冷接工具，米勒钳+光纤切割器+红光笔，140+元
- LC冷接头8支，60+元（做废了两支，心疼）
- 10G单模双纤光模块x6，100元，用完了
- 10G单模双纤光模块x8，80元，用了两只；一些多模光纤跳线，十几块钱；用来做网络设备间的连接，便宜就多备点了（其实是一开始买错了，设备间连接直接买DAC线就可以了）
- 2台桌面机+1台NAS用的网卡：Mellanox ConnectX-3两块（单10G光口）共70元，华为SP310一块（两个10G光口）60元

这次改造一共花了1200元左右

![image-20240519214829066](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519214829066.png)

![image-20240519214858349](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519214858349.png)



## 实操-拉线

### 

要拉两根光缆，使用旧线带新线的方式，就是用电工胶带把旧线和新线接在一起，然后大力出奇迹

由于购买的是成品缆，两端都做好LC头的，所以剪断一段后拉线，成功拉了一条：

![image-20240519210907787](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519210907787.png)

![image-20240519210951132](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519210951132.png)

然而在拉第二条的时候翻车，仔细数数拐了6个弯，可能阻力太大，接线除断开了，只好买了穿线神器（一根有弹性的金属丝）解决，这种穿线器可以灵活地在线管里拐弯：

![image-20240519211316501](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519211316501.png)



## 实操-冷接

根据冷接头的要求，用米勒钳剥出足够长的裸纤，再用光纤切割器做出好的端面，无尘纸蘸酒精擦擦，装上冷接子，测光功率，一套打完。接LC冷接头还是很容易的，该买的工具一个都别落，严格按照商家提供的教程就成。

最后接出来的头，接得好的可以接近2db，不好的有到-9dbm，手艺不佳但不影响用。

> 有一根接好后用了两天断掉的，应该是工艺不到位，重新接之后稳定用了一个月，目前工作得很好
>
> 有条件建议还是让师傅来熔接，我只是自己想折腾所以选的这个路线（。）

![image-20240519214943488](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519214943488.png)

![image-20240519215218839](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519215218839.png)

![image-20240519215424670](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519215424670.png)



### 完工



![image-20240519220613928](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519220613928.png)

在NAS和一桌面机上打流的效果，速度稳定：

![image-20240519221530934](_assets/垃圾佬家庭10G光纤网络升级记录/image-20240519221530934.png)